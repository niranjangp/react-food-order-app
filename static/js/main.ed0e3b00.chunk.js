(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,function(e,t,n){e.exports={form:"Checkout_form__3pJED",control:"Checkout_control__1RxA0",actions:"Checkout_actions__Bnzdx",submit:"Checkout_submit__5goSS",invalid:"Checkout_invalid__1DAAT"}},,function(e,t,n){e.exports={"cart-items":"Cart_cart-items__3J_Tn",total:"Cart_total__385-P",actions:"Cart_actions__CCijY","button--alt":"Cart_button--alt__1Lu5t",button:"Cart_button___a_RH"}},,function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__2RWom",summary:"CartItem_summary__11tYZ",price:"CartItem_price__1k9LI",amount:"CartItem_amount__1pkBs",actions:"CartItem_actions__3ZyX8"}},,,function(e,t,n){e.exports={button:"HeaderCartButton_button__3bPiS",icon:"HeaderCartButton_icon__6ier8",badge:"HeaderCartButton_badge__27LSU",bump:"HeaderCartButton_bump__3eoN5"}},,,function(e,t,n){e.exports={backdrop:"Modal_backdrop__24r1W",modal:"Modal_modal__BZ4mM","slide-down":"Modal_slide-down__1-N-P"}},function(e,t,n){e.exports={meals:"AvailableMeals_meals__3JXo1","meals-appear":"AvailableMeals_meals-appear__Ml5vB",mealsLoading:"AvailableMeals_mealsLoading__2rQGE",mealsError:"AvailableMeals_mealsError__7v_Fk"}},function(e,t,n){e.exports={meal:"MealItem_meal__1kfrC",description:"MealItem_description__3fbou",price:"MealItem_price__23DBj"}},,function(e,t,n){e.exports={header:"Header_header__1B3Na","main-image":"Header_main-image__Sy9rn"}},,function(e,t,n){e.exports={summary:"MealsSummary_summary__XKvdd"}},function(e,t,n){e.exports={card:"Card_card__2Okz8"}},function(e,t,n){e.exports={form:"MealItemForm_form__2Y4h5"}},function(e,t,n){e.exports={input:"Input_input__1btJC"}},,,,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(8),c=n.n(a),r=(n(27),n(2)),i=n(1),s=n.n(i),o=n(6),l=n.n(o),d=n(12),u=n(4),j=s.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},clearCart:function(){}}),m=n(13),b=n.n(m),h=n(0),O=function(e){return Object(h.jsx)("div",{className:b.a.backdrop,onClick:e.onClick})},p=function(e){return Object(h.jsx)("div",{className:b.a.modal,children:Object(h.jsx)("div",{className:b.a.content,children:e.children})})},x=document.getElementById("overlays"),f=function(e){return Object(h.jsxs)(i.Fragment,{children:[c.a.createPortal(Object(h.jsx)(O,{onClick:e.clickedClose}),x),c.a.createPortal(Object(h.jsx)(p,{children:e.children}),x)]})},_=n(5),v=n.n(_),C=n(7),y=n.n(C),g=function(e){var t="$".concat(e.price.toFixed(2));return Object(h.jsxs)("li",{className:y.a["cart-item"],children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:e.name}),Object(h.jsxs)("div",{className:y.a.summary,children:[Object(h.jsx)("span",{className:y.a.price,children:t}),Object(h.jsxs)("span",{className:y.a.amount,children:["x ",e.amount]})]})]}),Object(h.jsxs)("div",{className:y.a.actions,children:[Object(h.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),Object(h.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},k=n(3),N=n.n(k),A=function(e){return""===e.trim()},S=function(e){var t=Object(i.useState)({name:!0,street:!0,city:!0,zip:!0}),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(i.useRef)(),o=Object(i.useRef)(),l=Object(i.useRef)(),d=Object(i.useRef)();return Object(h.jsxs)("form",{onSubmit:function(t){try{t.preventDefault();var n=s.current.value,a=o.current.value,r=l.current.value,i=d.current.value,u=!A(n),j=!A(a),m=!A(r),b=5===i.trim().length;c({name:u,street:j,city:m,zip:b}),u&&j&&m&&b&&e.onSendData({name:n,street:a,city:r,zip:i})}catch(h){console.log("Error in handleSubmit ",h.stack)}},className:N.a.form,children:[Object(h.jsxs)("div",{className:"".concat(N.a.control," ").concat(a.name?"":N.a.invalid),children:[Object(h.jsx)("label",{htmlFor:"name",children:"Type Name"}),Object(h.jsx)("input",{type:"text",id:"name",ref:s}),!a.name&&Object(h.jsx)("p",{children:"Please enter a valid name!"})]}),Object(h.jsxs)("div",{className:"".concat(N.a.control," ").concat(a.street?"":N.a.invalid),children:[Object(h.jsx)("label",{htmlFor:"street",children:"Address - Street"}),Object(h.jsx)("input",{type:"text",id:"street",ref:o}),!a.street&&Object(h.jsx)("p",{children:"Please enter a valid street!"})]}),Object(h.jsxs)("div",{className:"".concat(N.a.control," ").concat(a.city?"":N.a.invalid),children:[Object(h.jsx)("label",{htmlFor:"city",children:"City"}),Object(h.jsx)("input",{type:"text",id:"city",ref:l}),!a.city&&Object(h.jsx)("p",{children:"Please enter a valid city!"})]}),Object(h.jsxs)("div",{className:"".concat(N.a.control," ").concat(a.zip?"":N.a.invalid),children:[Object(h.jsx)("label",{htmlFor:"zip",children:"Zip Code"}),Object(h.jsx)("input",{type:"text",id:"zip",ref:d}),!a.zip&&Object(h.jsx)("p",{children:"Please enter a valid zip code(5 characteres long)!"})]}),Object(h.jsxs)("div",{className:N.a.actions,children:[Object(h.jsx)("button",{type:"button",onClick:e.onCancel,children:"Cancel"}),Object(h.jsx)("button",{className:N.a.submit,children:"Confirm"})]})]})},I=function(e){var t=Object(i.useState)(!1),n=Object(r.a)(t,2),a=n[0],c=n[1],o=Object(i.useState)(!1),m=Object(r.a)(o,2),b=m[0],O=m[1],p=Object(i.useState)(!1),x=Object(r.a)(p,2),_=x[0],C=x[1],y=Object(i.useContext)(j),k="$".concat(y.totalAmount.toFixed(2)),N=y.items.length>0,A=function(e){try{y.addItem(Object(u.a)(Object(u.a)({},e),{},{amount:1}))}catch(t){console.log("error in handleCartItemAdd",t.stack)}},I=function(e){try{y.removeItem(e)}catch(t){console.log("error in handleCartItemRemove",t.stack)}},w=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,fetch("https://react-http-aafdf-default-rtdb.firebaseio.com/orders.json",{method:"POST",body:JSON.stringify({user:t,orderedItems:y.items}),headers:{"Content-Type":"application/json"}});case 4:"OK"===e.sent.statusText&&(O(!1),C(!0),y.clearCart()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error in submitOrderData",e.t0.stack);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),E=Object(h.jsx)("ul",{className:v.a["cart-items"],children:y.items.map((function(e){return Object(h.jsx)(g,{name:e.name,amount:e.amount,price:e.price,onAdd:A.bind(null,e),onRemove:I.bind(null,e.id)},e.id)}))}),M=Object(h.jsxs)(s.a.Fragment,{children:[E,Object(h.jsxs)("div",{className:v.a.total,children:[Object(h.jsx)("span",{children:"Total Amount"}),Object(h.jsx)("span",{children:k})]}),a?Object(h.jsx)(S,{onCancel:e.onClose,onSendData:w}):Object(h.jsxs)("div",{className:v.a.actions,children:[Object(h.jsx)("button",{className:v.a["button-alt"],onClick:e.onClose,children:"Close"}),N&&Object(h.jsx)("button",{className:v.a.button,onClick:function(e){try{c(!0)}catch(t){console.log("error in handleOrder",t.stack)}},children:"Order"})]})]}),R=Object(h.jsx)("p",{children:"Sending order data..."}),F=Object(h.jsxs)(s.a.Fragment,{children:[Object(h.jsx)("p",{children:"Successfully sent the order"}),Object(h.jsx)("div",{className:v.a.actions,children:Object(h.jsx)("button",{className:v.a.button,onClick:e.onClose,children:"OK"})})]});return Object(h.jsx)(f,{clickedClose:e.onClose,children:b?R:_?F:M})},w=n.p+"static/media/meals.2971f633.jpg",E=n(17),M=n.n(E),R=n(10),F=n.n(R),T=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(h.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},D=function(e){var t=Object(i.useState)(!1),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(i.useContext)(j).items,o=s.reduce((function(e,t){return e+t.amount}),0),l="".concat(F.a.button," ").concat(a?F.a.bump:"");return Object(i.useEffect)((function(){if(0!==s.length){c(!0);var e=setTimeout((function(){c(!1)}),300);return function(){clearTimeout(e)}}}),[s]),Object(h.jsxs)("button",{className:l,onClick:e.onClick,children:[Object(h.jsx)("span",{className:F.a.icon,children:Object(h.jsx)(T,{})}),Object(h.jsx)("span",{children:"My Cart"}),Object(h.jsx)("span",{className:F.a.badge,children:o})]})},H=function(e){return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsxs)("header",{className:M.a.header,children:[Object(h.jsx)("h1",{children:"Custom Meals"}),Object(h.jsx)(D,{onClick:e.onShowCart})]}),Object(h.jsx)("div",{className:M.a["main-image"],children:Object(h.jsx)("img",{src:w,alt:"A table full of delicious food!"})})]})},z=n(19),B=n.n(z),P=function(e){return Object(h.jsxs)("section",{className:B.a.summary,children:[Object(h.jsx)("h2",{children:"Delicious Digital Food, Delivered To You"}),Object(h.jsx)("p",{children:"Choose your favorite digital meal from our broad selection of available digital meals and enjoy a delicious virtual lunch or dinner at home."}),Object(h.jsx)("p",{children:"All our digital meals are cooked with high-quality ingredients, just-in-time and of course by experienced code-chefs!"})]})},L=n(14),J=n.n(L),K=n(20),Y=n.n(K),Z=function(e){return Object(h.jsx)("div",{className:Y.a.card,children:e.children})},V=n(15),X=n.n(V),$=n(21),W=n.n($),q=n(22),G=n.n(q),Q=s.a.forwardRef((function(e,t){return Object(h.jsxs)("div",{className:G.a.input,children:[Object(h.jsx)("label",{htmlFor:e.input.id,children:e.inputLabel}),Object(h.jsx)("input",Object(u.a)(Object(u.a)({},e.input),{},{ref:t}))]})})),U=function(e){var t=Object(i.useState)(!0),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(i.useRef)();return Object(h.jsxs)("form",{className:W.a.form,onSubmit:function(t){try{t.preventDefault();var n=s.current.value,a=+n;if(0===n.trim().length||a<1||a>5)return void c(!1);e.onAddToCart(a)}catch(r){console.log("Error in handleSubmit",r.stack)}},children:[Object(h.jsx)(Q,{ref:s,inputLabel:"Amount",input:{id:"amount_"+e.id,type:"number",min:"1",max:"5",step:"1",defaultValue:"1"}}),Object(h.jsx)("button",{children:"+ Add"}),!a&&Object(h.jsx)("p",{children:"Please enter a valid amount (1-5)."})]})},ee=function(e){var t=Object(i.useContext)(j),n="$".concat(e.price.toFixed(2));return Object(h.jsxs)("li",{className:X.a.meal,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:e.name}),Object(h.jsx)("div",{className:X.a.description,children:e.description}),Object(h.jsx)("div",{className:X.a.price,children:n})]}),Object(h.jsx)("div",{children:Object(h.jsx)(U,{id:e.id,onAddToCart:function(n){try{t.addItem({id:e.id,name:e.name,amount:n,price:e.price})}catch(a){console.log("Error in addToCartHandler",a.stack)}}})})]})},te=function(e){var t=Object(i.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(i.useState)(!0),o=Object(r.a)(s,2),u=o[0],j=o[1],m=Object(i.useState)(),b=Object(r.a)(m,2),O=b[0],p=b[1];Object(i.useEffect)((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-http-aafdf-default-rtdb.firebaseio.com/meals.json");case 2:if(t=e.sent,console.log("resp is ",t),"OK"===t.statusText){e.next=8;break}throw new Error("Something went wrong!");case 8:return e.next=10,t.json();case 10:for(r in n=e.sent,console.log("myJSON is ",n),a=[],n)a.push({id:r,name:n[r].name,description:n[r].description,price:n[r].price});console.log("loadedmeal is ",a),c(a),j(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch((function(e){j(!1),p(e.message)}))}),[]);var x=a.map((function(e){return Object(h.jsx)(ee,{name:e.name,description:e.description,price:e.price,id:e.id},e.id)}));return Object(h.jsx)("section",{className:J.a.meals,children:Object(h.jsx)(Z,{children:u?Object(h.jsx)("p",{className:J.a.mealsLoading,children:"Loading..."}):O?Object(h.jsx)("p",{className:J.a.mealsError,children:O}):Object(h.jsx)("ul",{children:x})})})},ne=function(e){return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)(P,{}),Object(h.jsx)(te,{})]})},ae=n(18),ce={items:[],totalAmount:0},re=function(e,t){try{if("ADD"===t.type){var n,a=e.totalAmount+t.item.price*t.item.amount,c=e.items.findIndex((function(e){return e.id===t.item.id})),r=e.items[c];if(r){var i=Object(u.a)(Object(u.a)({},r),{},{amount:r.amount+t.item.amount});(n=Object(ae.a)(e.items))[c]=i}else n=e.items.concat(t.item);return{items:n,totalAmount:a}}if("REMOVE"===t.type){var s,o=e.items.findIndex((function(e){return e.id===t.id})),l=e.items[o],d=e.totalAmount-l.price;if(1===l.amount)s=e.items.filter((function(e){return e.id!==t.id}));else{var j=Object(u.a)(Object(u.a)({},l),{},{amount:l.amount-1});(s=Object(ae.a)(e.items))[o]=j}return{items:s,totalAmount:d}}return t.type,ce}catch(m){console.log("Error in cartReducer",m.stack)}},ie=function(e){var t=Object(i.useReducer)(re,ce),n=Object(r.a)(t,2),a=n[0],c=n[1],s={items:a.items,totalAmount:a.totalAmount,addItem:function(e){try{c({type:"ADD",item:e})}catch(t){console.log("Error in handleAddItemToCart",t.stack)}},removeItem:function(e){try{c({type:"REMOVE",id:e})}catch(t){console.log("Error in handleAddItemToCart",t.stack)}},clearCart:function(){try{c({type:"CLEAR"})}catch(e){console.log("Error in clearCartHandler",e.stack)}}};return Object(h.jsx)(j.Provider,{value:s,children:e.children})};var se=function(){var e=Object(i.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(h.jsxs)(ie,{children:[n?Object(h.jsx)(I,{onClose:function(){try{a(!1)}catch(e){console.log("error in handleHideCart",e.stack)}}}):null,Object(h.jsx)(H,{onShowCart:function(){try{a(!0)}catch(e){console.log("error in handleShowCart",e.stack)}}}),Object(h.jsx)("main",{children:Object(h.jsx)(ne,{})})]})};c.a.render(Object(h.jsx)(se,{}),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.ed0e3b00.chunk.js.map